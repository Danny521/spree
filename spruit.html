<head>
  <title>Spark Jobs</title>
  <script src="moment.js" type="text/javascript" />
</head>

<body>
<div class="navbar navbar-static-top">

</div>
<div class="container-fluid">
  <h3>Spark Jobs</h3>
  <div><strong>Total Duration:</strong> TODO</div>
  <div><strong>Scheduling Mode:</strong> TODO</div>
  <div><a href="#completed"><strong>Completed Jobs:</strong></a> TODO</div>

  <h4 id="completed">Completed Jobs</h4>
  <table>
    <tbody>
    <tr>
      <th>Job Id</th>
      <th>Description</th>
      <th>Submitted</th>
      <th>Duration</th>
      <th>Stages: Succeeded/Total</th>
      <th>Tasks (for all stages): Succeeded/Total</th>
    </tr>
    {{> jobRows}}
    </tbody>
  </table>
</div>
</body>

<template name="jobRows">
  {{#each jobs}}
  {{log this}}
  <tr class="{{rowClass this}}">
    <td>{{id}}</td>
    <td><a href="/job/{{jobId}}">{{stages.[0].name}}</a></td>
    <td>{{formatDateTime time}}</td>
    <td>{{getJobDuration this}}</td>
    <td>{{getSucceededStages this}}/{{stages.length}}</td>
    <td>{{getSucceededTasks this}}/{{getNumTasks this}} ({{getStartedTasks this}} started, {{getFailedTasks this}} failed)</td>
  </tr>
  {{/each}}
</template>
