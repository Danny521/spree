
<template name="jobsPage">
  {{>navbar}}
  {{setTitle "Jobs - Spark"}}
  {{log this}}
  <div class="container-fluid">
    <h3>Spark Jobs</h3>
    <div>
      <ul class="unstyled">
        <li><strong>Total Job Duration:</strong> {{formatTime app.totalJobDuration}}</li>
        <li><strong>Total Task Duration:</strong> {{formatTime app.totalTaskDuration}}</li>
        <li><strong>Total Uptime:</strong> {{formatDuration app}}</li>
        <li><strong>Scheduling Mode:</strong> {{schedulingMode env}}</li>
      </ul>
    </div>
    {{#with jobCounts}}
      <div>
        {{#if active}}<span id="active-link"><a href="#active"><strong>Active Jobs:</strong></a> {{active}}</span>{{/if}}
        {{#if succeeded}}<span id="completed-link"><a href="#completed"><strong>Completed Jobs:</strong></a> {{succeeded}}</span>{{/if}}
        {{#if failed}}<span id="failed-link"><a href="#failed"><strong>Failed Jobs:</strong></a> {{failed}}</span>{{/if}}
      </div>
      <div id="all-link"><a href="#all"><strong>All Jobs:</strong></a> {{orZero all}}</div>

      {{#if showAll all}}
        {{#with tableData ../app "jobs" "All Jobs" all "AllJobs" "all" columns true}}
          {{>objsTable this}}
        {{/with}}
      {{else}}
        {{#with tableData ../app "jobs" "Active Jobs" running "ActiveJobs" "active" columns}}
          {{>objsTable this}}
        {{/with}}
        {{#with tableData ../app "jobs" "Completed Jobs" succeeded "CompletedJobs" "succeeded" columns}}
          {{>objsTable this}}
        {{/with}}
        {{#with tableData ../app "jobs" "Failed Jobs" failed "FailedJobs" "failed" columns}}
          {{>objsTable this}}
        {{/with}}
      {{/if}}
    {{/with}}
  </div>
</template>
