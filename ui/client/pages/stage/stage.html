
<template name="stagePage">
  {{>navbar}}
  {{setTitle stageAttempt}}
  {{log this}}
  <div class="container-fluid">
    {{#with stageAttempt}}
      <h3>Details for Stage {{stageId}}, Attempt {{id}}</h3>
      {{#with taskCounts}}
        {{succeeded}}/{{num}} succeeded, {{running}} active, {{orZero failed}} failed.
      {{/with}}
      {{#with metrics}}
        <div><strong>Total time across all tasks:</strong> {{formatTime ExecutorRunTime}}</div>

        {{#with InputMetrics}}
          {{#if BytesRead}}
          <div>
            <strong>Input Size / Records:</strong> {{formatBytes BytesRead}} / {{RecordsRead}} records
          </div>
          {{/if}}
        {{/with}}

        {{#with OutputMetrics}}
          {{#if BytesWritten}}
          <div>
            <strong>Output Size / Records:</strong> {{formatBytes BytesWritten}} / {{RecordsWritten}} records
          </div>
          {{/if}}
        {{/with}}

        {{#with ShuffleReadMetrics}}
          {{#if shuffleBytesRead this}}
          <div>
            <strong>Shuffle read:</strong> {{shuffleBytesReadStr this}} / {{TotalRecordsRead}} records
          </div>
          {{/if}}
        {{/with}}

        {{#with ShuffleWriteMetrics}}
          {{#if ShuffleBytesWritten}}
          <div>
            <strong>Shuffle write:</strong> {{formatBytes ShuffleBytesWritten}} / {{ShuffleRecordsWritten}} records
          </div>
          {{/if}}
        {{/with}}
      {{/with}}

      <div>
        {{>React getSummaryMetricsTableData this}}
      </div>
      <div>
        {{>React getExecutorTableData this}}
      </div>
      {{#if accumulables.length}}
        <div>
          {{>React getAccumulatorsTableData this}}
        </div>
      {{/if}}
      <div>
        {{>React getTasksTableData this}}
      </div>
    {{/with}}
  </div>
</template>
