
<template name="jobsPage">
  {{>navbar}}
  {{setTitle "Jobs - Spark"}}
  {{log this}}
  <div class="container-fluid">
    <h3>Spark Jobs</h3>
    <div><strong>Total Duration:</strong> {{formatDuration app.time.start}}</div>
    <div><strong>Scheduling Mode:</strong> {{schedulingMode env}}</div>
    {{#if active.num}}<div id="active-link"><a href="#active"><strong>Active Jobs:</strong></a> {{active.num}}</div>{{/if}}
    {{#if completed.num}}<div id="completed-link"><a href="#completed"><strong>Completed Jobs:</strong></a> {{completed.num}}</div>{{/if}}
    {{#if failed.num}}<div id="failed-link"><a href="#failed"><strong>Failed Jobs:</strong></a> {{failed.num}}</div>{{/if}}
    <div id="all-link"><a href="#all"><strong>All Jobs:</strong></a> {{all.num}}</div>

    {{#if showAll}}
      <h4 id="all">All Jobs ({{all.num}})</h4>
      {{#with all.jobs}}
        {{>table data=sorted columns=columns}}
      {{else}}
        <!--Kind of hacky way to show just the table headers of an empty table-->
        {{>table columns=columns}}
      {{/with}}
    {{else}}
      {{#if active.num}}
        <h4 id="active">Active Jobs ({{active.num}})</h4>
        {{#with active.jobs}}
          {{>table data=sorted columns=columns}}
        {{/with}}
      {{/if}}
      {{#if completed.num}}
        <h4 id="completed">Completed Jobs ({{completed.num}})</h4>
        {{#with completed.jobs}}
          {{>table data=sorted columns=columns}}
        {{/with}}
      {{/if}}
      {{#if failed.num}}
        <h4 id="failed">Failed Jobs ({{failed.num}})</h4>
        {{#with failed.jobs}}
          {{>table data=sorted columns=columns}}
        {{/with}}
      {{/if}}
    {{/if}}
  </div>
</template>

<template name="jobRow-desc">
  <a href="/a/{{appId}}/job/{{id}}">{{name}}</a>
</template>
